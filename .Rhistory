setwd(dir.choose())
?dir.choose
setwd("/Documents/ShootDontShoot/data")
setwd("/Users/nicholascamp/Documents/ShootDontShoot/data")
source("helper/helper.R")
d <- read.csv("data/consolidated_data.csv")
list.files
getwd()
setwd("/Users/nicholascamp/Documents/ShootDontShoot")
d <- read.csv("data/consolidated_data.csv")
source("helper/helper.R")
good_subs <- d %>%
group_by(workerid, expt) %>%
summarise(accuracy = mean(accuracy))
qplot(accuracy, data=good_subs)
rm(list = ls())
set
library(car)
library(lme4)
library(lmerTest)
library(ggplot2)
library(bootstrap)
library(tidyr)
source("helper/helper.R")
install.packages("tidyr")
rm(list = ls())
set
library(car)
library(lme4)
library(lmerTest)
library(ggplot2)
library(bootstrap)
library(tidyr)
source("helper/helper.R")
theme_set(theme_bw())
d <- read.csv("data/consolidated_data.csv")
good_subs <- d %>%
group_by(workerid, expt) %>%
summarise(accuracy = mean(accuracy))
qplot(accuracy, data=good_subs)
library(car)
library(lme4)
library(lmerTest)
library(ggplot2)
library(bootstrap)
library(tidyr)
source("helper/helper.R")
d <- read.csv("data/consolidated_data.csv")
good_subs <- d %>%
group_by(workerid, expt) %>%
summarise(accuracy = mean(accuracy))
qplot(accuracy, data=good_subs)
good_subs <- d
group_by(workerid, expt)
??group_by
library(dplyr)
good_subs <- d %>%
group_by(workerid, expt) %>%
summarise(accuracy = mean(accuracy))
qplot(accuracy, data=good_subs)
head(good_subs)
head(d)
good_subs <- subset(d,responded==1) %>%
group_by(workerid, expt) %>%
summarise(accuracy = mean(accuracy))
qplot(accuracy, data=good_subs)
ms.acc <- d %>%
filter(responded == 1) %>%
group_by(expt, target, prime, workerid) %>%
summarise(accuracy = mean(accuracy)) %>%
group_by(expt, target, prime, add=FALSE) %>%
summarise(acc.cih = ci.high(accuracy),
acc.cil = ci.low(accuracy),
accuracy = mean(accuracy),
n = n())
qplot(prime, accuracy, fill = target,
geom = "bar", position = "dodge", stat = "identity",
data = ms.acc) +
geom_linerange(aes(ymin = accuracy - acc.cil,
ymax = accuracy + acc.cih),
position = position_dodge(width = .9)) +
facet_grid(.~expt, scales="free_x") +
geom_hline(yintercept=.5, lty=2)
ms.rt <- d %>%
filter(responded == 1 & accuracy == 1) %>%
group_by(expt, target, prime, workerid) %>%
summarise(rt = mean(rt)) %>%
group_by(expt, target, prime, add=FALSE) %>%
summarise(rt.cih = ci.high(rt),
rt.cil = ci.low(rt),
rt = mean(rt),
n = n())
qplot(prime, rt, fill = target,
geom = "bar", position = "dodge", stat = "identity",
data = ms) +
geom_linerange(aes(ymin = rt - rt.cil,
ymax = rt + rt.cih),
position = position_dodge(width = .9)) +
facet_grid(.~expt, scales="free_x")
qplot(prime, rt, fill = target,
geom = "bar", position = "dodge", stat = "identity",
data = ms.rt) +
geom_linerange(aes(ymin = rt - rt.cil,
ymax = rt + rt.cih),
position = position_dodge(width = .9)) +
facet_grid(.~expt, scales="free_x")
sdt <- d %>%
mutate(hit = target == "threat" & accuracy == 1,
miss = target == "threat" & accuracy == 0,
cr = target == "neutral" & accuracy == 1,
fa = target == "neutral" & accuracy == 0) %>%
group_by(expt, prime, workerid) %>%
summarise(hits = mean(c(hit, 1)),
fas = mean(c(fa, 1))) %>%
mutate(dprime = dprime(hits, fas),
bias = beta(hits, fas),
criterion = criterion(hits, fas)) %>%
gather(signal, value, dprime, bias, criterion) %>%
group_by(expt, prime, signal) %>%
summarise(cih = ci.high(value),
cil = ci.low(value),
value = mean(value, na.rm=TRUE))
quartz()
qplot(prime, value, fill = prime,
geom = "bar", position = "dodge", stat = "identity",
data = sdt) +
geom_linerange(aes(ymin = value - cil,
ymax = value + cih),
position = position_dodge(width = .9)) +
facet_grid(signal~expt, scales="free")
sdt <- d %>%
mutate(hit = target == "threat" & accuracy == 1,
miss = target == "threat" & accuracy == 0,
cr = target == "neutral" & accuracy == 1,
fa = target == "neutral" & accuracy == 0) %>%
group_by(expt, prime, workerid) %>%
summarise(hits = mean(c(hit, 1)),
fas = mean(c(fa, 1))) %>%
mutate(dprime = dprime(hits, fas),
bias = beta(hits, fas),
criterion = criterion(hits, fas)) %>%
gather(signal, value, dprime, bias, criterion) %>%
group_by(expt, prime, signal) %>%
summarise(cih = ci.high(value),
cil = ci.low(value),
value = mean(value, na.rm=TRUE))
sdt <- d %>%
mutate(hit = target == "threat" & accuracy == 1,
miss = target == "threat" & accuracy == 0,
cr = target == "neutral" & accuracy == 1,
fa = target == "neutral" & accuracy == 0) %>%
group_by(expt, prime, workerid) %>%
summarise(hits = mean(c(hit, 1)),
fas = mean(c(fa, 1))) %>%
mutate(dprime = dprime(hits, fas),
bias = beta(hits, fas),
criterion = criterion(hits, fas)) %>%
gather(signal, value, dprime, bias, criterion) %>%
group_by(expt, prime, signal) %>%
summarise(cih = ci.high(value),
cil = ci.low(value),
value = mean(value, na.rm=TRUE))
qplot(prime, value, fill = prime,
geom = "bar", position = "dodge", stat = "identity",
data = sdt) +
geom_linerange(aes(ymin = value - cil,
ymax = value + cih),
position = position_dodge(width = .9)) +
facet_grid(signal~expt, scales="free")
?mutate
?summarise
?gather
summarise(cih = ci.high(value),
cil = ci.low(value),
value = mean(value, na.rm=TRUE))
sdt <- d %>%
mutate(hit = target == "threat" & accuracy == 1,
miss = target == "threat" & accuracy == 0,
cr = target == "neutral" & accuracy == 1,
fa = target == "neutral" & accuracy == 0) %>%
group_by(expt, prime, workerid) %>%
summarise(hits = mean(c(hit, 1)),
fas = mean(c(fa, 1))) %>%
mutate(dprime = dprime(hits, fas),
bias = beta(hits, fas),
criterion = criterion(hits, fas)) %>%
gather(signal, value, dprime, bias, criterion) %>%
group_by(expt, prime, signal) %>%
summarise(cih = ci.high(value),
cil = ci.low(value),
value = mean(value, na.rm=TRUE))
?dplyr
browseVignettes(package = "dplyr")
?gather
names(d)
head(sdt)
sdt <- d %>%
mutate(hit = target == "threat" & accuracy == 1,
miss = target == "threat" & accuracy == 0,
cr = target == "neutral" & accuracy == 1,
fa = target == "neutral" & accuracy == 0) %>%
group_by(expt, prime, workerid) %>%
summarise(hits = mean(c(hit, 1)),
fas = mean(c(fa, 1))) %>%
mutate(dprime = dprime(hits, fas),
bias = beta(hits, fas),
criterion = criterion(hits, fas)) %>%
gather(signal, value, dprime, bias, criterion) %>%
group_by(expt, prime, signal)) %>%
sdt <- d %>%
mutate(hit = target == "threat" & accuracy == 1,
miss = target == "threat" & accuracy == 0,
cr = target == "neutral" & accuracy == 1,
fa = target == "neutral" & accuracy == 0) %>%
group_by(expt, prime, workerid) %>%
summarise(hits = mean(c(hit, 1)),
fas = mean(c(fa, 1))) %>%
mutate(dprime = dprime(hits, fas),
bias = beta(hits, fas),
criterion = criterion(hits, fas)) %>%
gather(d, value, dprime, bias, criterion) %>%
group_by(expt, prime, signal) %>%
summarise(cih = ci.high(value),
cil = ci.low(value),
value = mean(value, na.rm=TRUE))
sdt <- d %>%
mutate(hit = target == "threat" & accuracy == 1,
miss = target == "threat" & accuracy == 0,
cr = target == "neutral" & accuracy == 1,
fa = target == "neutral" & accuracy == 0) %>%
group_by(expt, prime, workerid) %>%
summarise(hits = mean(c(hit, 1)),
fas = mean(c(fa, 1))) %>%
mutate(dprime = dprime(hits, fas),
bias = beta(hits, fas),
criterion = criterion(hits, fas)) %>%
gather(signal, value, dprime, bias, criterion) %>%
group_by(expt, prime, signal) %>%
summarise(cih = ci.high(value),
cil = ci.low(value),
value = mean(value, na.rm=TRUE))
head(d)
sdt <- d %>%
mutate(hit = target == "threat" & accuracy == 1,
miss = target == "threat" & accuracy == 0,
cr = target == "neutral" & accuracy == 1,
fa = target == "neutral" & accuracy == 0) %>%
group_by(expt, prime, workerid) %>%
summarise(hits = mean(c(hit, 1)),
fas = mean(c(fa, 1))) %>%
mutate(dprime = dprime(hits, fas),
bias = beta(hits, fas),
criterion = criterion(hits, fas)) %>%
gather(value, dprime, bias, criterion) %>%
group_by(expt, prime, signal) %>%
summarise(cih = ci.high(value),
cil = ci.low(value),
value = mean(value, na.rm=TRUE))
sdt <- d %>%
mutate(hit = target == "threat" & accuracy == 1,
miss = target == "threat" & accuracy == 0,
cr = target == "neutral" & accuracy == 1,
fa = target == "neutral" & accuracy == 0) %>%
group_by(expt, prime, workerid) %>%
summarise(hits = mean(c(hit, 1)),
fas = mean(c(fa, 1))) %>%
mutate(dprime = dprime(hits, fas),
bias = beta(hits, fas),
criterion = criterion(hits, fas)))
sdt <- d %>%
mutate(hit = target == "threat" & accuracy == 1,
miss = target == "threat" & accuracy == 0,
cr = target == "neutral" & accuracy == 1,
fa = target == "neutral" & accuracy == 0) %>%
group_by(expt, prime, workerid) %>%
summarise(hits = mean(c(hit, 1)),
fas = mean(c(fa, 1))) %>%
mutate(dprime = dprime(hits, fas),
bias = beta(hits, fas),
criterion = criterion(hits, fas))) %>%
sdt <- d %>%
mutate(hit = target == "threat" & accuracy == 1,
miss = target == "threat" & accuracy == 0,
cr = target == "neutral" & accuracy == 1,
fa = target == "neutral" & accuracy == 0) %>%
group_by(expt, prime, workerid) %>%
summarise(hits = mean(c(hit, 1)),
fas = mean(c(fa, 1))) %>%
mutate(dprime = dprime(hits, fas),
bias = beta(hits, fas),
criterion = criterion(hits, fas)) %>%
)
sdt <- d %>%
mutate(hit = target == "threat" & accuracy == 1,
miss = target == "threat" & accuracy == 0,
cr = target == "neutral" & accuracy == 1,
fa = target == "neutral" & accuracy == 0) %>%
group_by(expt, prime, workerid) %>%
summarise(hits = mean(c(hit, 1)),
fas = mean(c(fa, 1))) %>%
mutate(dprime = dprime(hits, fas),
bias = beta(hits, fas),
criterion = criterion(hits, fas)) %>%
gather(signal, value, dprime, bias, criterion) %>%
group_by(expt, prime, signal) %>%
summarise(cih = ci.high(value),
cil = ci.low(value),
value = mean(value, na.rm=TRUE))
sdt <- d %>%
mutate(hit = target == "threat" & accuracy == 1,
miss = target == "threat" & accuracy == 0,
cr = target == "neutral" & accuracy == 1,
fa = target == "neutral" & accuracy == 0) %>%
group_by(expt, prime, workerid) %>%
summarise(hits = mean(c(hit, 1)),
fas = mean(c(fa, 1))) %>%
mutate(dprime = dprime(hits, fas),
bias = beta(hits, fas),
criterion = criterion(hits, fas)) %>%
gather(signal, value, dprime, bias, criterion) %>%
group_by(expt, prime, signal) %>%
summarise(cih = ci.high(value), cil = ci.low(value), value = mean(value, na.rm=TRUE))
qplot(prime, value, fill = prime,
geom = "bar", position = "dodge", stat = "identity",
data = sdt) +
geom_linerange(aes(ymin = value - cil,
ymax = value + cih),
position = position_dodge(width = .9)) +
facet_grid(signal~expt, scales="free")
ms.rt <- d %>%
filter(responded == 1 & accuracy == 1) %>%
group_by(expt, target, prime, workerid) %>%
summarise(rt = mean(rt)) %>%
group_by(expt, target, prime, add=FALSE) %>%
summarise(rt.cih = ci.high(rt),
rt.cil = ci.low(rt),
rt = mean(rt),
n = n())
qplot(prime, rt, fill = target,
geom = "bar", position = "dodge", stat = "identity",
data = ms.rt) +
geom_linerange(aes(ymin = rt - rt.cil,
ymax = rt + rt.cih),
position = position_dodge(width = .9)) +
facet_grid(.~expt, scales="free_x")
?summarise
rm(list = ls())
set
rm(list = ls())
library(car)
library(lme4)
library(lmerTest)
library(ggplot2)
library(bootstrap)
library(dplyr)
library(tidyr)
source("helper/helper.R")
theme_set(theme_bw())
d <- read.csv("data/consolidated_data.csv")
good_subs <- d %>%
group_by(workerid, expt) %>%
summarise(accuracy = mean(accuracy))
qplot(accuracy, data=good_subs)
ms.acc <- d %>%
filter(responded == 1) %>%
group_by(expt, target, prime, workerid) %>%
summarise(accuracy = mean(accuracy)) %>%
group_by(expt, target, prime, add=FALSE) %>%
summarise(acc.cih = ci.high(accuracy),
acc.cil = ci.low(accuracy),
accuracy = mean(accuracy),
n = n())
qplot(prime, accuracy, fill = target,
geom = "bar", position = "dodge", stat = "identity",
data = ms.acc) +
geom_linerange(aes(ymin = accuracy - acc.cil,
ymax = accuracy + acc.cih),
position = position_dodge(width = .9)) +
facet_grid(.~expt, scales="free_x") +
geom_hline(yintercept=.5, lty=2)
ms.rt <- d %>%
filter(responded == 1 & accuracy == 1) %>%
group_by(expt, target, prime, workerid) %>%
summarise(rt = mean(rt)) %>%
group_by(expt, target, prime, add=FALSE) %>%
summarise(rt.cih = ci.high(rt),
rt.cil = ci.low(rt),
rt = mean(rt),
n = n())
qplot(prime, rt, fill = target,
geom = "bar", position = "dodge", stat = "identity",
data = ms) +
geom_linerange(aes(ymin = rt - rt.cil,
ymax = rt + rt.cih),
position = position_dodge(width = .9)) +
facet_grid(.~expt, scales="free_x")
ms.rt <- d %>%
filter(responded == 1 & accuracy == 1) %>%
group_by(expt, target, prime, workerid) %>%
summarise(rt = mean(rt)) %>%
group_by(expt, target, prime, add=FALSE) %>%
summarise(rt.cih = ci.high(rt),
rt.cil = ci.low(rt),
rt = mean(rt),
n = n())
qplot(prime, rt, fill = target,
geom = "bar", position = "dodge", stat = "identity",
data = ms.rt) +
geom_linerange(aes(ymin = rt - rt.cil,
ymax = rt + rt.cih),
position = position_dodge(width = .9)) +
facet_grid(.~expt, scales="free_x")
sdt <- d %>%
mutate(hit = target == "threat" & accuracy == 1,
miss = target == "threat" & accuracy == 0,
cr = target == "neutral" & accuracy == 1,
fa = target == "neutral" & accuracy == 0) %>%
group_by(expt, prime, workerid) %>%
summarise(hits = mean(c(hit, 1)),
fas = mean(c(fa, 1))) %>%
mutate(dprime = dprime(hits, fas),
bias = beta(hits, fas),
criterion = criterion(hits, fas)) %>%
gather(signal, value, dprime, bias, criterion) %>%
group_by(expt, prime, signal) %>%
summarise(cih = ci.high(value),
cil = ci.low(value),
value = mean(value, na.rm=TRUE))
quartz()
qplot(prime, value, fill = prime,
geom = "bar", position = "dodge", stat = "identity",
data = sdt) +
geom_linerange(aes(ymin = value - cil,
ymax = value + cih),
position = position_dodge(width = .9)) +
facet_grid(signal~expt, scales="free")
#This is the same analysis, but only for trials where participants responded within the
#This is the same analysis, but only for trials where participants responded within the
sdt <- d %>%
filter(responded==1)%>%
mutate(hit = target == "threat" & accuracy == 1,
miss = target == "threat" & accuracy == 0,
cr = target == "neutral" & accuracy == 1,
fa = target == "neutral" & accuracy == 0) %>%
group_by(expt, prime, workerid) %>%
summarise(hits = mean(c(hit, 1)),
fas = mean(c(fa, 1))) %>%
mutate(dprime = dprime(hits, fas),
bias = beta(hits, fas),
criterion = criterion(hits, fas)) %>%
gather(signal, value, dprime, bias, criterion) %>%
group_by(expt, prime, signal) %>%
summarise(cih = ci.high(value),
cil = ci.low(value),
value = mean(value, na.rm=TRUE))
quartz()
qplot(prime, value, fill = prime,
geom = "bar", position = "dodge", stat = "identity",
data = sdt) +
geom_linerange(aes(ymin = value - cil,
ymax = value + cih),
position = position_dodge(width = .9)) +
facet_grid(signal~expt, scales="free")
sdt <- d %>%
filter(responded==1)%>%
mutate(hit = target == "threat" & accuracy == 1,
miss = target == "threat" & accuracy == 0,
cr = target == "neutral" & accuracy == 1,
fa = target == "neutral" & accuracy == 0) %>%
group_by(expt, prime, workerid) %>%
summarise(hits = mean(c(hit, 1)),
fas = mean(c(fa, 1))) %>%
mutate(dprime = dprime(hits, fas),
bias = beta(hits, fas),
criterion = criterion(hits, fas)) %>%
gather(signal, value, dprime, bias, criterion) %>%
group_by(expt, prime, signal) %>%
summarise(cih = ci.high(value),
cil = ci.low(value),
value = mean(value, na.rm=TRUE))
quartz()
qplot(prime, value, fill = prime,
geom = "bar", position = "dodge", stat = "identity",
data = sdt) +
geom_linerange(aes(ymin = value - cil,
ymax = value + cih),
position = position_dodge(width = .9)) +
facet_grid(signal~expt, scales="free")
sdt <- d %>%
filter(responded==1)%>%
mutate(hit = target == "threat" & accuracy == 1,
miss = target == "threat" & accuracy == 0,
cr = target == "neutral" & accuracy == 1,
fa = target == "neutral" & accuracy == 0) %>%
group_by(expt, prime, workerid) %>%
summarise(hits = mean(c(hit, 1)),
fas = mean(c(fa, 1))) %>%
mutate(dprime = dprime(hits, fas),
bias = beta(hits, fas),
criterion = criterion(hits, fas)) %>%
gather(signal, value, dprime, bias, criterion) %>%
group_by(expt, prime, signal) %>%
summarise(cih = ci.high(value),
cil = ci.low(value),
value = mean(value, na.rm=TRUE))
qplot(prime, value, fill = prime,
geom = "bar", position = "dodge", stat = "identity",
data = sdt) +
geom_linerange(aes(ymin = value - cil,
ymax = value + cih),
position = position_dodge(width = .9)) +
facet_grid(signal~expt, scales="free")
